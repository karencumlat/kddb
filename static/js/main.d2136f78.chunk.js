(this.webpackJsonpkddb=this.webpackJsonpkddb||[]).push([[0],{102:function(e,n,t){},104:function(e,n,t){"use strict";t.r(n);var c,a,r=t(1),i=t(2),o=t.n(i),s=t(48),l=t.n(s),d=(t(57),t(4)),b=t(0),j=t(25),u=t(3),O=t.p+"static/media/logo.907a6451.svg",h=t(16),m=t(15),f=t.n(m),p="without_genres=16|99|10762|10763|10764|10767",g="https://api.themoviedb.org/3/",v="".concat(g,"discover/tv?with_original_language=ko"),x="api_key=299cd45add63bfb2f4b534e2c123c7bb",C=new Date,k=C.getFullYear(),w=C.getMonth()+1,N=C.getDate();c=N<10?"0".concat(N):N;(a=1===w?12:w-1)<10?"".concat(k,"-0").concat(a,"-").concat(c):"".concat(k,"-").concat(a,"-").concat(c);var R=w<10?"".concat(k,"-0").concat(w,"-").concat(c):"".concat(k,"-").concat(w,"-").concat(c);var E=function(e,n,t){var c=Object(i.useState)(!0),a=Object(d.a)(c,2),r=a[0],o=a[1],s=Object(i.useState)(!1),l=Object(d.a)(s,2),b=l[0],j=l[1],u=Object(i.useState)([]),O=Object(d.a)(u,2),m=O[0],C=O[1],k=Object(i.useState)(!1),w=Object(d.a)(k,2),N=w[0],E=w[1];return Object(i.useEffect)((function(){C([])}),[n,t]),Object(i.useEffect)((function(){var c;o(!0),j(!1);var a={SEARCH:"https://api.themoviedb.org/3/search/tv?".concat(x,"&page=").concat(e,"&query=").concat(t,'"'),DISCOVER:"".concat(v,"&").concat(x,"&page=").concat(e,"&").concat(p),LATEST:"".concat(g,"tv/on_the_air?with_original_language=ko&").concat(p,"&").concat(x,"&page=").concat(e),UPCOMING:"".concat(v,"&").concat(p,"&first_air_date.gte=").concat(R,"&sort_by=first_air_date.asc&").concat(x,"&page=").concat(e),WATCHING:"https://api.themoviedb.org/4/list/7069257?page=1&api_key=299cd45add63bfb2f4b534e2c123c7bb",WATCHED:"https://api.themoviedb.org/4/list/7069256?page=".concat(e,"&api_key=299cd45add63bfb2f4b534e2c123c7bb")};return f()({method:"GET",url:a[n],cancelToken:new f.a.CancelToken((function(e){return c=e}))}).then((function(e){var t=e.data.results.filter((function(e){return"ko"===e.original_language}));C("SEARCH"===n?function(e){return Object(h.a)(new Set([].concat(Object(h.a)(e),Object(h.a)(t))))}:function(n){return Object(h.a)(new Set([].concat(Object(h.a)(n),Object(h.a)(e.data.results))))}),E(e.data.total_pages>e.data.page),o(!1)})).catch((function(e){f.a.isCancel(e)||j(!0)})),function(){return c()}}),[e,n,t]),{loading:r,error:b,dramas:m,hasMore:N}},S=t(49),y=t(8),A=t(28),_=[{name:"DISCOVER",title:"All Shows",icon:Object(r.jsx)(y.f,{}),path:"/discover"},{name:"LATEST",title:"On Air",icon:Object(r.jsx)(y.d,{}),path:"/latest"},{name:"UPCOMING",title:"Upcoming",icon:Object(r.jsx)(S.a,{}),path:"/upcoming"},{name:"WATCHING",title:"Watching",icon:Object(r.jsx)(A.b,{}),path:"/watching"},{name:"WATCHED",title:"Watched",icon:Object(r.jsx)(A.a,{}),path:"/watched"}],L=(t(75),t(9)),T=t.n(L);t(76);var I=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"skeleton-card--group lg",children:Array(14).fill().map((function(e,n){return Object(r.jsx)("div",{className:"skeleton-card",children:Object(r.jsxs)("div",{className:"skeleton-card--content",children:[Object(r.jsx)(T.a,{height:"15rem"}),Object(r.jsxs)("div",{className:"skeleton-card--info",children:[Object(r.jsx)(T.a,{height:"1.25rem",width:"100%"}),Object(r.jsx)(T.a,{height:".9rem",width:"80%"})]})]})},n)}))}),Object(r.jsx)("div",{className:"skeleton-card--group md",children:Array(14).fill().map((function(e,n){return Object(r.jsx)("div",{className:"skeleton-card",children:Object(r.jsxs)("div",{className:"skeleton-card--content",children:[Object(r.jsx)(T.a,{height:"10rem"}),Object(r.jsxs)("div",{className:"skeleton-card--info",children:[Object(r.jsx)(T.a,{height:"1.25rem",width:"100%"}),Object(r.jsx)(T.a,{height:".9rem",width:"80%"})]})]})},n)}))}),Object(r.jsx)("div",{className:"skeleton-card--group sm",children:Array(14).fill().map((function(e,n){return Object(r.jsx)("div",{className:"skeleton-card",children:Object(r.jsxs)("div",{className:"skeleton-card--content",children:[Object(r.jsx)(T.a,{height:100}),Object(r.jsxs)("div",{className:"skeleton-card--info",children:[Object(r.jsx)(T.a,{height:".9rem",width:"100%"}),Object(r.jsx)(T.a,{height:".9rem",width:"80%"})]})]})},n)}))})]})},D=t(14),F=t(5),H=t(6),W={COLOR:{GREEN:"#24a148",BLACK:"#020509",WHITE:"#FFFFFF",GRAY:"#F4F4F4",GRAY50:"#6F6F6F",GRAY90:"#262626",RED:"#ff0038"},BOXSHADOW:"0px 2px 4px rgba(0, 0, 0, 0.25)"};function G(){var e=Object(F.a)(["\n  display: flex;\n  position: relative;\n  min-width: 250px;\n"]);return G=function(){return e},e}function B(){var e=Object(F.a)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 0.5rem;\n  color: ",";\n  > button {\n    color: ",";\n  }\n"]);return B=function(){return e},e}function K(){var e=Object(F.a)(["\n  background-color: ",";\n  border-radius: 50px;\n  border: 0.125rem solid transparent;\n  font-family: inherit;\n  padding: 0.5rem 1rem;\n  color: ",";\n  width:100%;\n\n  ::placeholder {\n    color: rgba(255, 255, 255, 0.5);\n  }\n\n  :focus {\n    outline:none;\n    color: ",";\n    border: 0.125rem solid ",";\n    -webkit-transition: all 0.2s ease-in-out;\n    transition: all 0.2s ease-in-out;\n"]);return K=function(){return e},e}var P=H.b.input(K(),W.COLOR.GRAY90,W.COLOR.WHITE,W.COLOR.WHITE,W.COLOR.WHITE),z=H.b.span(B(),W.COLOR.GRAY,W.COLOR.GRAY),M=H.b.div(G());var V=function(e){var n=e.onChange,t=e.onBlur,c=e.onClick,a=e.placeholder,o=e.value,s=Object(i.useState)(!1),l=Object(d.a)(s,2),b=l[0],j=l[1];return Object(r.jsxs)(M,Object(D.a)(Object(D.a)({},e),{},{children:[Object(r.jsx)(P,{type:"text",placeholder:a,value:o,onChange:n,onBlur:function(){t(),j(""!==o)},onFocus:function(){return j(!0)}}),Object(r.jsx)(z,{children:b?Object(r.jsx)("button",{onClick:function(){c(),j(!1)},children:Object(r.jsx)(y.e,{size:"1.5em"})}):Object(r.jsx)(y.g,{size:"1.5em"})})]}))},Y=[{id:10759,label:"actionAdventure",name:"Action & Adventure"},{id:16,label:"anime",name:"Animation"},{id:35,label:"comedy",name:"Comedy"},{id:80,label:"crime",name:"Crime"},{id:99,label:"docu",name:"Documentary"},{id:18,label:"drama",name:"Drama"},{id:10751,label:"family",name:"Family"},{id:10762,label:"kids",name:"Kids"},{id:9648,label:"mystery",name:"Mystery"},{id:10763,label:"news",name:"News"},{id:10764,label:"reality",name:"Reality"},{id:10765,label:"fantasy",name:"Sci-Fi & Fantasy"},{id:10766,label:"soap",name:"Soap"},{id:10767,label:"talk",name:"Talk"},{id:10768,label:"politics",name:"War & Politics"},{id:37,label:"western",name:"Western"}];t(80);var J=function(e){var n=e.name,t=e.overview,c=e.poster_path,a=e.genre,i=o.a.useState(!0),s=Object(d.a)(i,2),l=s[0],j=s[1];return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("img",{src:JSON.stringify(c).includes("null")?"https://images.unsplash.com/photo-1540483761890-a1f7be05d99f?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=645&q=80":"https://image.tmdb.org/t/p/w500"+c,className:"fade-in",loading:"lazy",alt:n})||Object(r.jsx)(T.a,{height:"15rem"}),Object(r.jsxs)("div",{className:"card-info",children:[Object(r.jsx)("h3",{title:n,children:n||Object(r.jsx)(T.a,{height:"1.25rem",width:"100%"})}),Object(r.jsx)("small",{children:a||Object(r.jsx)(T.a,{height:".9rem",width:"80%"})})]}),!0===l?Object(r.jsxs)("div",{className:"overview",children:[Object(r.jsx)(b.b.Provider,{value:{size:"2em",className:"overview-close-btn"},children:Object(r.jsx)("button",{"aria-label":"Close",onClick:function(){j(!l),setTimeout((function(){return j(!0)}),1e3)},children:Object(r.jsx)(y.b,{})})}),Object(r.jsx)("h3",{title:n,children:n}),Object(r.jsx)("small",{children:a||""}),Object(r.jsx)("p",{children:t})]}):null]},n)};t(81);var U=function(e){return e.onClick,Object(r.jsxs)("div",{className:"container--no-results",children:[Object(r.jsx)("i",{className:"fc-film-reel",children:Object(r.jsx)(y.c,{className:"spin",size:"8rem"})}),Object(r.jsx)("h2",{children:"No Results Found"}),Object(r.jsxs)("small",{children:["We could not find what you are looking for. ",Object(r.jsx)("br",{}),"Please try again or discover new KDramas from our full list."]})]})},q=o.a.forwardRef((function(e,n){var t=e.renderSection,c=e.dramas;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"card-group",children:c.length<1&&"SEARCH"===t?Object(r.jsx)(U,{}):c.map((function(e,t){var a=e.name,i=e.poster_path,o=e.vote_average,s=e.overview,l=e.genre_ids,d=Y.map((function(e){return!0===l.includes(e.id)?e.name:""})).filter((function(e){return""!==e}));return c.length===t+1?Object(r.jsx)("div",{className:"card-group--content",ref:n,children:Object(r.jsx)(J,{name:a,poster_path:i,vote_average:o,overview:s,genre:d.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action")})},a):Object(r.jsx)("div",{className:"card-group--content",children:Object(r.jsx)(J,{name:a,poster_path:i,vote_average:o,overview:s,genre:d.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action")})},a)}))})})})),X=t(51),Q=t.n(X);function Z(){var e=Object(F.a)(["\n  background-color: ",";\n  color: ",";\n  width: fit-content;\n  border-radius: 2.125rem;\n  padding: 0.25rem 1rem;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  @media (max-width: 800px) {\n    text-align: center;\n    width: 100%;\n    margin-top: 1rem;\n  }\n"]);return Z=function(){return e},e}var $=H.b.button(Z(),W.COLOR.RED,W.COLOR.WHITE);var ee=function(e){var n=e.onClick,t=e.title;return Object(r.jsx)(b.b.Provider,{value:{size:"1.5em",className:"play-btn-icon"},children:Object(r.jsxs)($,{onClick:n,className:"play-btn",children:[Object(r.jsx)("i",{children:Object(r.jsx)(y.d,{})}),t]})})};t(102);var ne=function(e){var n=e.name,t=e.overview,c=e.genre,a=e.backdrop_path,i=e.first_air_date,o=e.onPlayClick;return Object(r.jsxs)("div",{className:"watching-container",children:[Object(r.jsx)("div",{className:"watching--backdrop",style:{backgroundImage:"url(".concat("https://image.tmdb.org/t/p/w1280"+a,")")},children:Object(r.jsxs)("div",{className:"backdrop--info",children:[Object(r.jsx)(ee,{onClick:o,title:"Trailer",className:"play-btn"}),Object(r.jsx)("h3",{className:"backdrop--info-title",children:n}),Object(r.jsxs)("small",{className:"backdrop--info-subtitle",children:[i.substring(0,4)," \u2022 ",c]}),Object(r.jsx)("p",{className:"backdrop--info-overview",children:t})]})}),Object(r.jsxs)("div",{className:"backdrop--info-mobile",children:[Object(r.jsx)("h3",{className:"backdrop--info-title",children:n}),Object(r.jsxs)("small",{className:"backdrop--info-subtitle",children:[i.substring(0,4)," \u2022 ",c]}),Object(r.jsx)("p",{className:"backdrop--info-overview",children:t}),Object(r.jsx)(ee,{onClick:o,title:"Trailer",className:"play-btn"})]})]})};function te(){var e=Object(F.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  content: ' ';\n  background-color: rgba(0, 0, 0, 0.5);\n"]);return te=function(){return e},e}var ce=H.b.div(te());var ae=function(e){var n=e.onClick;return Object(r.jsx)(ce,Object(D.a)({onClick:n},e))};function re(){var e=Object(F.a)(["\n      color: ",";\n\n      &:hover {\n        color: ",";\n      }\n    "]);return re=function(){return e},e}function ie(){var e=Object(F.a)(["\n      background: ",";\n      border: "," 1px solid;\n      color: ",";\n\n      &:hover {\n        background: ",";\n        color: ",";\n        border-color: ",";\n      }\n    "]);return ie=function(){return e},e}function oe(){var e=Object(F.a)(["\n      background: ",";\n      color: ",";\n    "]);return oe=function(){return e},e}function se(){var e=Object(F.a)(["\n      background: ",";\n      color: ",";\n    "]);return se=function(){return e},e}function le(){var e=Object(F.a)(["\n  padding: 0.5em;\n  width: ",";\n  ",";\n\n  ",";\n\n  ",";\n\n  ",";\n"]);return le=function(){return e},e}var de=H.b.button(le(),(function(e){return e.fullWidth?"100%":"auto"}),(function(e){return e.primary&&Object(H.a)(se(),W.COLOR.GREEN,W.COLOR.WHITE)}),(function(e){return e.secondary&&Object(H.a)(oe(),W.COLOR.BLACK,W.COLOR.WHITE)}),(function(e){return e.tertiary&&Object(H.a)(ie(),W.COLOR.WHITE,W.COLOR.BLACK,W.COLOR.BLACK,W.COLOR.GREEN,W.COLOR.WHITE,W.COLOR.GREEN)}),(function(e){return e.ghost&&Object(H.a)(re(),W.COLOR.BLACK,W.COLOR.GREEN)}));var be=function(e){var n=e.onClick,t=e.children;return Object(r.jsx)(de,Object(D.a)(Object(D.a)({onClick:n},e),{},{children:t}))};function je(){var e=Object(F.a)(["\n  background: ",";\n  color: ",";\n  width: 90%;\n  height: 90%;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  z-index: 100;\n\n  .close-btn {\n    position: absolute;\n    top: 0.125em;\n    right: 0.5em;\n    padding: 0;\n    font-size: 2em;\n  }\n\n  .close-btn-icon{\n    color: ","\n  }\n\n  h3 {\n    margin: 1em;\n  }\n\n  .modal-content {\n    height: 100%;\n  }\n\n  .modal-content > * {\n    flex: 1;\n  }\n\n  }\n"]);return je=function(){return e},e}var ue=H.b.div(je(),W.COLOR.BLACK,W.COLOR.WHITE,W.COLOR.WHITE);var Oe=function(e){var n=e.onClose,t=e.heading,c=e.children;return Object(r.jsxs)(ue,Object(D.a)(Object(D.a)({},e),{},{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:t}),Object(r.jsx)(b.b.Provider,{value:{size:"2em",className:"close-btn-icon"},children:Object(r.jsx)(be,{onClick:n,ghost:!0,className:"close-btn",children:Object(r.jsx)(y.a,{})})})]}),Object(r.jsx)("div",{className:"modal-content",children:c})]}))};var he=function(e){var n=e.renderSection,t=e.dramas,c=Object(i.useState)(""),a=Object(d.a)(c,2),o=a[0],s=a[1],l=Object(i.useState)(),b=Object(d.a)(l,2),j=b[0],u=b[1],O=Object(i.useState)(""),h=Object(d.a)(O,2),m=h[0],p=h[1],g=Object(i.useState)(!1),v=Object(d.a)(g,2),x=v[0],C=v[1];return Object(i.useEffect)((function(){u()}),[o]),Object(i.useEffect)((function(){var e;return f()({method:"GET",url:"https://api.themoviedb.org/3/tv/".concat(o,"/videos?api_key=299cd45add63bfb2f4b534e2c123c7bb&language=ko-KR"),cancelToken:new f.a.CancelToken((function(n){return e=n}))}).then((function(e){console.table(e.data);var n=e.data.results.filter((function(e){return"Trailer"===e.type}));console.log(n[0]),u(n[0].key)})).catch((function(e){f.a.isCancel(e)||p(!0)})),function(){return e()}}),[o]),Object(r.jsxs)(r.Fragment,{children:[!0===x&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Oe,{heading:"Play Trailer",onClose:function(){return C(!1)},children:Object(r.jsx)(Q.a,{url:"https://www.youtube.com/watch?v=".concat(j),width:"auto",height:"100%"})}),Object(r.jsx)(ae,{onClick:function(){return C(!1)}})]}),Object(r.jsx)("div",{className:"card-group",children:t.length<1&&"SEARCH"===n?Object(r.jsx)(U,{}):t.map((function(e,n){var t=e.name,c=e.overview,a=e.genre_ids,i=e.id,o=Y.map((function(e){return!0===a.includes(e.id)?e.name:""})).filter((function(e){return""!==e}));return Object(r.jsx)(ne,{name:t,overview:c,genre:o.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action"),backdrop_path:e.backdrop_path,first_air_date:e.first_air_date,id:i,onPlayClick:function(){s(i),C(!0)}},t)}))}),""!==m?"Error":""]})};var me=function(e){var n=Object(i.useState)(1),t=Object(d.a)(n,2),c=t[0],a=t[1],o=Object(i.useState)("DISCOVER"),s=Object(d.a)(o,2),l=s[0],h=s[1],m=Object(i.useState)(""),f=Object(d.a)(m,2),p=f[0],g=f[1],v=E(c,l,p),x=v.dramas,C=v.hasMore,k=v.loading,w=v.error,N=Object(i.useRef)(),R=Object(i.useCallback)((function(e){k||(N.current&&N.current.disconnect(),N.current=new IntersectionObserver((function(e){e[0].isIntersecting&&!0===C&&a((function(e){return e+1}))})),e&&N.current.observe(e))}),[k,C]);function S(e){e.preventDefault(),g(e.target.value),a(1),h("SEARCH")}return Object(i.useEffect)((function(){h(window.localStorage.getItem("section")),console.log(window.localStorage.getItem("section"))}),[]),Object(i.useEffect)((function(){window.localStorage.setItem("section",l)}),[l]),Object(r.jsx)(j.a,{children:Object(r.jsxs)("div",{className:"app",children:[Object(r.jsxs)("header",{className:"app-header--mobile",children:[Object(r.jsx)("img",{src:O,alt:"KDDB logo",onClick:function(){return h("DISCOVER")},className:"logo"}),Object(r.jsx)("nav",{className:"app-header--mobile--nav",children:Object(r.jsx)("ul",{className:"mobile-menu",children:_.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsxs)(j.b,{to:e.path,onClick:function(){a(1),h(e.name)},className:e.name===l?"active":"",children:[Object(r.jsx)(b.b.Provider,{value:{size:"1.25em",className:"mobile-icon"},children:e.icon}),Object(r.jsx)("span",{children:e.title})]})},e.name)}))})}),Object(r.jsx)(V,{className:"mobile-menu--search",placeholder:"Search K-Drama...",onChange:S,onBlur:function(){return""===p&&h("DISCOVER")},value:p,onClick:function(){g(""),h("DISCOVER")}})]}),Object(r.jsxs)("header",{className:"app-header",children:[Object(r.jsx)("img",{src:O,alt:"KDDB logo",onClick:function(){return h("DISCOVER")},className:"logo"}),Object(r.jsx)("nav",{className:"app-header--nav",children:Object(r.jsx)("ul",{className:"menu",children:_.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(j.b,{to:e.path,onClick:function(){a(1),h(e.name)},className:e.name===l?"active":"",children:e.title})},e.name)}))})}),Object(r.jsx)(V,{className:"search",placeholder:"Search K-Drama...",onChange:S,onBlur:function(){return""===p&&h("DISCOVER")},value:p,onClick:function(){g(""),h("DISCOVER")}})]}),Object(r.jsxs)("main",{id:"main",className:"app-main",children:[Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/kddb/watching",children:Object(r.jsx)(he,{dramas:x,renderSection:l})}),Object(r.jsx)(u.a,{path:"/kddb/".concat(l),children:Object(r.jsx)(q,{dramas:x,renderSection:l,ref:R})}),Object(r.jsx)(u.a,{path:"/",children:Object(r.jsx)(q,{dramas:x,renderSection:l,ref:R})})]}),k?Object(r.jsx)(I,{}):"",w&&"Error"]})]})})},fe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,105)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),c(e),a(e),r(e),i(e)}))};l.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(me,{})}),document.getElementById("root")),fe()},57:function(e,n,t){},75:function(e,n,t){},76:function(e,n,t){},80:function(e,n,t){},81:function(e,n,t){}},[[104,1,2]]]);
//# sourceMappingURL=main.d2136f78.chunk.js.map