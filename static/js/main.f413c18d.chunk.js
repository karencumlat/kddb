(this.webpackJsonpkddb=this.webpackJsonpkddb||[]).push([[0],{27:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var c,n,i=a(1),r=a(2),s=a.n(r),o=a(20),l=a.n(o),d=(a(27),a(4)),b=a.p+"static/media/logo.907a6451.svg",j=a(5),u=a(9),m=a.n(u),h="without_genres=16|99|10762|10763|10764|10767",p="https://api.themoviedb.org/3/",O="".concat(p,"discover/tv?with_original_language=ko"),g="api_key=299cd45add63bfb2f4b534e2c123c7bb",v=new Date,f=v.getFullYear(),x=v.getMonth()+1,N=v.getDate();c=N<10?"0".concat(N):N;(n=1===x?12:x-1)<10?"".concat(f,"-0").concat(n,"-").concat(c):"".concat(f,"-").concat(n,"-").concat(c);var k=x<10?"".concat(f,"-0").concat(x,"-").concat(c):"".concat(f,"-").concat(x,"-").concat(c);var C=function(e,t,a){var c=Object(r.useState)(!0),n=Object(d.a)(c,2),i=n[0],s=n[1],o=Object(r.useState)(!1),l=Object(d.a)(o,2),b=l[0],u=l[1],v=Object(r.useState)([]),f=Object(d.a)(v,2),x=f[0],N=f[1],C=Object(r.useState)(!1),w=Object(d.a)(C,2),_=w[0],S=w[1];return Object(r.useEffect)((function(){N([])}),[t,a]),Object(r.useEffect)((function(){var c;s(!0),u(!1);var n={SEARCH:"https://api.themoviedb.org/3/search/tv?".concat(g,"&page=").concat(e,"&query=").concat(a,'"'),DISCOVER:"".concat(O,"&").concat(g,"&page=").concat(e,"&").concat(h),LATEST:"".concat(p,"tv/on_the_air?with_original_language=ko&").concat(h,"&").concat(g,"&page=").concat(e),UPCOMING:"".concat(O,"&").concat(h,"&first_air_date.gte=").concat(k,"&sort_by=first_air_date.asc&").concat(g,"&page=").concat(e),WATCHING:"https://api.themoviedb.org/4/list/7069257?page=1&api_key=299cd45add63bfb2f4b534e2c123c7bb",WATCHED:"https://api.themoviedb.org/4/list/7069256?page=".concat(e,"&api_key=299cd45add63bfb2f4b534e2c123c7bb")};return m()({method:"GET",url:n[t],cancelToken:new m.a.CancelToken((function(e){return c=e}))}).then((function(e){var a=e.data.results.filter((function(e){return"ko"===e.original_language}));N("SEARCH"===t?function(e){return Object(j.a)(new Set([].concat(Object(j.a)(e),Object(j.a)(a))))}:function(t){return Object(j.a)(new Set([].concat(Object(j.a)(t),Object(j.a)(e.data.results))))}),S(e.data.total_pages>e.data.page),s(!1)})).catch((function(e){m.a.isCancel(e)||u(!0)})),function(){return c()}}),[e,t,a]),{loading:i,error:b,dramas:x,hasMore:_}},w=a(21),_=a(7),S=a(11),A=[{name:"DISCOVER",title:"All Shows",icon:Object(i.jsx)(_.c,{})},{name:"LATEST",title:"On Air",icon:Object(i.jsx)(_.b,{})},{name:"UPCOMING",title:"Upcoming",icon:Object(i.jsx)(w.a,{})},{name:"WATCHING",title:"Watching",icon:Object(i.jsx)(S.b,{})},{name:"WATCHED",title:"Watched",icon:Object(i.jsx)(S.a,{})}],y=[{id:10759,label:"actionAdventure",name:"Action & Adventure"},{id:16,label:"anime",name:"Animation"},{id:35,label:"comedy",name:"Comedy"},{id:80,label:"crime",name:"Crime"},{id:99,label:"docu",name:"Documentary"},{id:18,label:"drama",name:"Drama"},{id:10751,label:"family",name:"Family"},{id:10762,label:"kids",name:"Kids"},{id:9648,label:"mystery",name:"Mystery"},{id:10763,label:"news",name:"News"},{id:10764,label:"reality",name:"Reality"},{id:10765,label:"fantasy",name:"Sci-Fi & Fantasy"},{id:10766,label:"soap",name:"Soap"},{id:10767,label:"talk",name:"Talk"},{id:10768,label:"politics",name:"War & Politics"},{id:37,label:"western",name:"Western"}],D=(a(46),a(0));a(47);var E=function(e){var t=e.items,a=e.onClick,c=e.selectedItem;return Object(i.jsx)("div",{className:"mobile-menu",children:t.map((function(e){return Object(i.jsxs)("button",{"aria-label":e.title,onClick:a,value:e.name,className:e.name===c?"active":"",children:[Object(i.jsx)(D.b.Provider,{value:{size:"1.25em",className:"mobile-icon"},children:e.icon}),Object(i.jsx)("span",{children:e.title})]},e.name)}))})};a(48);var I=function(e){var t=e.name,a=e.overview,c=e.poster_path,n=e.genre,r=s.a.useState(!0),o=Object(d.a)(r,2),l=o[0],b=o[1];return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("img",{src:JSON.stringify(c).includes("null")?"https://images.unsplash.com/photo-1540483761890-a1f7be05d99f?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=645&q=80":"https://image.tmdb.org/t/p/w500"+c,loading:"lazy",alt:t}),Object(i.jsxs)("div",{className:"card-info",children:[Object(i.jsx)("h3",{title:t,children:t}),Object(i.jsx)("small",{children:n||Object(i.jsx)("span",{children:"\xa0"})})]}),!0===l?Object(i.jsxs)("div",{className:"overview",children:[Object(i.jsx)(D.b.Provider,{value:{size:"2em",className:"overview-close-btn"},children:Object(i.jsx)("button",{"aria-label":"Close",onClick:function(){b(!l),setTimeout((function(){return b(!0)}),1e3)},children:Object(i.jsx)(_.a,{})})}),Object(i.jsx)("h3",{title:t,children:t}),Object(i.jsx)("small",{children:n||""}),Object(i.jsx)("p",{children:a})]}):null]},t)};a(49);var T=function(e){var t=e.name,a=e.overview,c=e.genre,n=e.backdrop_path,r=e.first_air_date;return Object(i.jsxs)("div",{className:"watching-container",children:[Object(i.jsx)("div",{className:"watching--backdrop",style:{backgroundImage:"url(".concat("https://image.tmdb.org/t/p/w1280"+n,")")},children:Object(i.jsxs)("div",{className:"backdrop--info",children:[Object(i.jsx)("h3",{className:"backdrop--info-title",children:t}),Object(i.jsxs)("small",{className:"backdrop--info-subtitle",children:[r.substring(0,4)," \u2022 ",c]}),Object(i.jsx)("p",{className:"backdrop--info-overview",children:a})]})}),Object(i.jsxs)("div",{className:"backdrop--info-mobile",children:[Object(i.jsx)("h3",{className:"backdrop--info-title",children:t}),Object(i.jsxs)("small",{className:"backdrop--info-subtitle",children:[r.substring(0,4)," \u2022 ",c]}),Object(i.jsx)("p",{className:"backdrop--info-overview",children:a})]})]})};a(50);var H=function(e){var t=e.items,a=e.onClick,c=e.selectedItem;return Object(i.jsx)("div",{className:"menu",children:t.map((function(e){return Object(i.jsx)("button",{onClick:a,value:e.name,className:e.name===c?"active":"",children:e.title},e.name)}))})};function R(){var e=Object(r.useState)(1),t=Object(d.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)("DISCOVER"),s=Object(d.a)(n,2),o=s[0],l=s[1],j=Object(r.useState)(""),u=Object(d.a)(j,2),m=u[0],h=u[1],p=C(a,o,m),O=p.dramas,g=p.hasMore,v=p.loading,f=p.error,x=Object(r.useRef)(),N=Object(r.useCallback)((function(e){v||(x.current&&x.current.disconnect(),x.current=new IntersectionObserver((function(e){e[0].isIntersecting&&!0===g&&c((function(e){return e+1}))})),e&&x.current.observe(e))}),[v,g]);function k(e){h(e.target.value),c(1),l("SEARCH")}return Object(i.jsxs)("div",{className:"app",children:[Object(i.jsxs)("header",{className:"app-header--mobile",children:[Object(i.jsx)("img",{src:b,alt:"KDDB logo",onClick:function(){return window.location.reload()},className:"logo"}),Object(i.jsx)(E,{selectedItem:o,items:A,onClick:function(e){l(e.target.value),c(1)}}),Object(i.jsx)("input",{type:"text",id:"search",className:"search",placeholder:"Search K-Drama...",onChange:k,onBlur:function(){return""===m&&l("DISCOVER")}})]}),Object(i.jsxs)("header",{className:"app-header",children:[Object(i.jsx)("img",{src:b,alt:"KDDB logo",onClick:function(){return window.location.reload()},className:"logo"}),Object(i.jsx)("nav",{className:"app-header--nav",children:Object(i.jsx)(H,{selectedItem:o,items:A,onClick:function(e){c(1),l(e.target.value)}})}),Object(i.jsx)("input",{type:"text",id:"search",className:"search",placeholder:"Search K-Drama...",onChange:k,onBlur:function(){return""===m&&l("DISCOVER")}})]}),Object(i.jsxs)("main",{id:"main",className:"app-main",children:[Object(i.jsx)("h2",{children:o}),Object(i.jsx)("div",{className:"card-group",children:O.length<1&&"SEARCH"===o?Object(i.jsxs)(i.Fragment,{children:["TODO: Create Error (No results) Component",Object(i.jsx)("p",{children:" no result found"})]}):O.map((function(e,t){var a=e.name,c=e.poster_path,n=e.vote_average,r=e.overview,s=e.genre_ids,l=y.map((function(e){return!0===s.includes(e.id)?e.name:""})).filter((function(e){return""!==e}));return"WATCHING"===o?Object(i.jsx)(T,{name:a,overview:r,genre:l.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action"),backdrop_path:e.backdrop_path,first_air_date:e.first_air_date},a):O.length===t+1?Object(i.jsx)("div",{className:"card-group--content",ref:N,children:Object(i.jsx)(I,{name:a,poster_path:c,vote_average:n,overview:r,genre:l.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action")})},a):Object(i.jsx)("div",{className:"card-group--content",children:Object(i.jsx)(I,{name:a,poster_path:c,vote_average:n,overview:r,genre:l.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action")})},a)}))}),Object(i.jsx)("div",{children:!0===v?"Loading K-drama...":""}),Object(i.jsx)("div",{children:f&&"Error"})]})]})}var M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),i(e),r(e)}))};l.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(R,{})}),document.getElementById("root")),M()}},[[51,1,2]]]);
//# sourceMappingURL=main.f413c18d.chunk.js.map