(this.webpackJsonpkddb=this.webpackJsonpkddb||[]).push([[0],{27:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var c,n,i=a(1),r=a(2),s=a.n(r),o=a(20),l=a.n(o),d=(a(27),a(4)),b=a(9),j=a(8),m=a.n(j),u="without_genres=16|99|10762|10763|10764|10767",h="https://api.themoviedb.org/3/",p="".concat(h,"discover/tv?with_original_language=ko"),v="api_key=299cd45add63bfb2f4b534e2c123c7bb",O=new Date,f=O.getFullYear(),g=O.getMonth()+1,x=O.getDate();c=x<10?"0".concat(x):x;(n=1===g?12:g-1)<10?"".concat(f,"-0").concat(n,"-").concat(c):"".concat(f,"-").concat(n,"-").concat(c);var k=g<10?"".concat(f,"-0").concat(g,"-").concat(c):"".concat(f,"-").concat(g,"-").concat(c);var w=a(21),N=a(6),_=a(11),C=[{name:"DISCOVER",title:"All Shows",icon:Object(i.jsx)(N.c,{})},{name:"LATEST",title:"On Air",icon:Object(i.jsx)(N.b,{})},{name:"UPCOMING",title:"Upcoming",icon:Object(i.jsx)(w.a,{})},{name:"WATCHING",title:"Watching",icon:Object(i.jsx)(_.b,{})},{name:"WATCHED",title:"Watched",icon:Object(i.jsx)(_.a,{})}],A=[{id:10759,label:"actionAdventure",name:"Action & Adventure"},{id:16,label:"anime",name:"Animation"},{id:35,label:"comedy",name:"Comedy"},{id:80,label:"crime",name:"Crime"},{id:99,label:"docu",name:"Documentary"},{id:18,label:"drama",name:"Drama"},{id:10751,label:"family",name:"Family"},{id:10762,label:"kids",name:"Kids"},{id:9648,label:"mystery",name:"Mystery"},{id:10763,label:"news",name:"News"},{id:10764,label:"reality",name:"Reality"},{id:10765,label:"fantasy",name:"Sci-Fi & Fantasy"},{id:10766,label:"soap",name:"Soap"},{id:10767,label:"talk",name:"Talk"},{id:10768,label:"politics",name:"War & Politics"},{id:37,label:"western",name:"Western"}],S=(a(46),a(0));a(47);var y=function(e){var t=e.items,a=e.onClick,c=e.selectedItem;return Object(i.jsx)("div",{className:"mobile-menu",children:t.map((function(e){return Object(i.jsxs)("button",{"aria-label":e.title,onClick:a,value:e.name,className:e.name===c?"active":"",children:[Object(i.jsx)(S.b.Provider,{value:{size:"1.25em",className:"mobile-icon"},children:e.icon}),Object(i.jsx)("span",{children:e.title})]},e.name)}))})};a(48);var D=function(e){var t=e.name,a=e.overview,c=e.poster_path,n=e.genre,r=s.a.useState(!0),o=Object(d.a)(r,2),l=o[0],b=o[1];return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsx)("img",{src:JSON.stringify(c).includes("null")?"https://images.unsplash.com/photo-1540483761890-a1f7be05d99f?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=645&q=80":"https://image.tmdb.org/t/p/w500"+c,loading:"lazy",alt:t}),Object(i.jsxs)("div",{className:"card-info",children:[Object(i.jsx)("h3",{title:t,children:t}),Object(i.jsx)("small",{children:n||Object(i.jsx)("span",{children:"\xa0"})})]}),!0===l?Object(i.jsxs)("div",{className:"overview",children:[Object(i.jsx)(S.b.Provider,{value:{size:"2em",className:"overview-close-btn"},children:Object(i.jsx)("button",{"aria-label":"Close",onClick:function(){b(!l),setTimeout((function(){return b(!0)}),1e3)},children:Object(i.jsx)(N.a,{})})}),Object(i.jsx)("h3",{title:t,children:t}),Object(i.jsx)("small",{children:n||""}),Object(i.jsx)("p",{children:a})]}):null]},t)};a(49);var I=function(e){var t=e.name,a=e.overview,c=e.genre,n=e.backdrop_path,r=e.first_air_date;return Object(i.jsxs)("div",{className:"watching-container",children:[Object(i.jsx)("div",{className:"watching--backdrop",style:{backgroundImage:"url(".concat("https://image.tmdb.org/t/p/w1280"+n,")")},children:Object(i.jsxs)("div",{className:"backdrop--info",children:[Object(i.jsx)("h3",{className:"backdrop--info-title",children:t}),Object(i.jsxs)("small",{className:"backdrop--info-subtitle",children:[r.substring(0,4)," \u2022 ",c]}),Object(i.jsx)("p",{className:"backdrop--info-overview",children:a})]})}),Object(i.jsxs)("div",{className:"backdrop--info-mobile",children:[Object(i.jsx)("h3",{className:"backdrop--info-title",children:t}),Object(i.jsxs)("small",{className:"backdrop--info-subtitle",children:[r.substring(0,4)," \u2022 ",c]}),Object(i.jsx)("p",{className:"backdrop--info-overview",children:a})]})]})};a(50);var T=function(e){var t=e.items,a=e.onClick,c=e.selectedItem;return Object(i.jsx)("div",{className:"menu",children:t.map((function(e){return Object(i.jsx)("button",{onClick:a,value:e.name,className:e.name===c?"active":"",children:e.title},e.name)}))})};function E(){var e=Object(r.useState)(1),t=Object(d.a)(e,2),a=t[0],c=t[1],n=s.a.useState("DISCOVER"),o=Object(d.a)(n,2),l=o[0],j=o[1],O=function(e,t){var a=Object(r.useState)(!0),c=Object(d.a)(a,2),n=c[0],i=c[1],s=Object(r.useState)(!1),o=Object(d.a)(s,2),l=o[0],j=o[1],O=Object(r.useState)([]),f=Object(d.a)(O,2),g=f[0],x=f[1],w=Object(r.useState)(!1),N=Object(d.a)(w,2),_=N[0],C=N[1],A={SEARCH:"https://api.themoviedb.org/3/search/tv?".concat(v,"&").concat("&language=en-US","&page=").concat(e,'&query="'),DISCOVER:"".concat(p,"&").concat(v,"&page=").concat(e,"&").concat(u),LATEST:"".concat(h,"tv/on_the_air?with_original_language=ko&").concat(u,"&").concat(v,"&page=").concat(e),UPCOMING:"".concat(p,"&").concat(u,"&first_air_date.gte=").concat(k,"&sort_by=first_air_date.asc&").concat(v,"&page=1"),WATCHING:"https://api.themoviedb.org/4/list/7069257?page=1&api_key=299cd45add63bfb2f4b534e2c123c7bb",WATCHED:"https://api.themoviedb.org/4/list/7069256?page=".concat(e,"&api_key=299cd45add63bfb2f4b534e2c123c7bb")};return Object(r.useEffect)((function(){x([])}),[t]),Object(r.useEffect)((function(){var e;return i(!0),j(!1),m()({method:"GET",url:A[t],cancelToken:new m.a.CancelToken((function(t){return e=t}))}).then((function(e){x((function(t){return Object(b.a)(new Set([].concat(Object(b.a)(t),Object(b.a)(e.data.results))))})),C(e.data.total_results>0),i(!1),console.log(e.data)})).catch((function(e){m.a.isCancel(e)||j(!0)})),function(){return e()}}),[e,t]),{loading:n,error:l,dramas:g,hasMore:_}}(a,l),f=O.dramas,g=O.hasMore,x=O.loading,w=O.error,N=Object(r.useRef)(),_=Object(r.useCallback)((function(e){x||(N.current&&N.current.disconnect(),N.current=new IntersectionObserver((function(e){e[0].isIntersecting&&g&&c((function(e){return e+1}))})),e&&N.current.observe(e))}),[x,g]);return Object(i.jsxs)("div",{className:"app",children:[Object(i.jsxs)("header",{className:"app-header--mobile",children:[Object(i.jsx)("span",{className:"app-header--mobile-nav",children:Object(i.jsx)("h1",{onClick:function(){return window.location.reload()},children:"KDDB"})}),Object(i.jsx)(y,{selectedItem:l,items:C,onClick:function(e){j(e.target.value),c(1)}})]}),Object(i.jsxs)("header",{className:"app-header",children:[Object(i.jsx)("h1",{onClick:function(){return window.location.reload()},children:"KDDB"}),Object(i.jsx)("nav",{className:"app-header--nav",children:Object(i.jsx)(T,{selectedItem:l,items:C,onClick:function(e){c(1),j(e.target.value)}})})]}),Object(i.jsxs)("main",{id:"main",className:"app-main",children:[Object(i.jsx)("h2",{children:l}),Object(i.jsx)("div",{className:"card-group",children:f.map((function(e,t){var a=e.name,c=e.poster_path,n=e.vote_average,r=e.overview,s=e.genre_ids,o=A.map((function(e){return!0===s.includes(e.id)?e.name:""})).filter((function(e){return""!==e}));return"WATCHING"===l?Object(i.jsx)(I,{name:a,overview:r,genre:o.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action"),backdrop_path:e.backdrop_path,first_air_date:e.first_air_date},a):f.length===t+1?Object(i.jsx)("div",{className:"card-group--content",ref:_,children:Object(i.jsx)(D,{name:a,poster_path:c,vote_average:n,overview:r,genre:o.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action")})},a):Object(i.jsx)("div",{className:"card-group--content",children:Object(i.jsx)(D,{name:a,poster_path:c,vote_average:n,overview:r,genre:o.toString().replace(/,/g," \u2022 ").replace(/Action & Adventure/g,"Action")})},a)}))}),Object(i.jsx)("div",{children:!0===x?"Loading...":""}),Object(i.jsx)("div",{children:w&&"Error"})]})]})}var M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),i(e),r(e)}))};l.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(E,{})}),document.getElementById("root")),M()}},[[51,1,2]]]);
//# sourceMappingURL=main.9f1f59d8.chunk.js.map